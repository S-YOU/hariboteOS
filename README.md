# hariboteOS
このリポジトリは「[30日でできる！ OS自作入門](https://www.amazon.co.jp/dp/B00IR1HYI0)」という本を進めたときのログです。
（1日ずつコードを少しずつ書いていきフルスクラッチでOSを開発しよう、という本です。）

この本ではWindowsで開発することを前提にかかれている（著者作のWindows用ツールが使われている）のですが、
付属のツールを使用せず、Ubuntu16.04の環境でほぼ最後まで進めることができました。
今後同じように進める人に少しは参考になる？と思ったので、コードをおいておきます。

本の付属CDのデータは[サポートページ](https://book.mynavi.jp/supportsite/detail/4839919844.html)でダウンロード可能です。

## 注意点(書籍と異なる点など)
- アセンブラにはgas(GNU assembler)を使っています。
- イメージファイルの作成にmformat、エミュレータとしてqemuを使っています。(Install: `# apt install mtools qemu-system`)
- コードはほぼ付属CDの内容と同じにしていますが、都合により微妙に変えているところもあります。
- 28日目の__alloca、29日目の"圧縮ツール"、30日目の"高度なアプリケーション"の内容はスキップしています。
- qemuでの確認のみで、実機での確認はしていないので、beepやキーボードランプなどは動くかどうかわかりません。
- hrbファイルのフォーマットが必要になる箇所は無理やりすすめていますが、リンカスクリプトでヘッダファイルを作れるはずなので本当はその方がスマートだと思います
- 3日目のC言語導入のところで詰まった当時の私は理解の浅いまま無理やり進めてしまいましたが、[8日目 32ビットモードへの道] と [22日目 C言語で文字列表示(2)]のhrbヘッダの構造あたりを先に読んで理解してから進めたほうが良いと思います。
- 終わった今、見直してみるとおかしいところもありますが...修正するほどでもないのでこのままにしておきます。


## 進める上で参考になった本、サイトなど
- [32ビットコンピュータをやさしく語る　はじめて読む486 (アスキー書籍)](https://www.amazon.co.jp/dp/B00OCF5YUA/)
  - 図とコードと丁寧な解説でCPUの機能について説明されています。OS自作入門と平行して読むと理解が深まります。
- [Handwriting](http://lv4.hateblo.jp/archive/category/%E8%87%AA%E4%BD%9COS)
- [0から作るOS開発](http://softwaretechnique.jp/OS_Development/)

どれも大変お世話になりました。感謝。

## おまけ 本の感想
レビューを見ると賛否両論あるようですが、OSのことを知りたいがどこから手をつければ良いかわからないという初心者の道しるべとしてはよいと思います。
本を終えたあとで次はあれを学ぼう、この機能はあのOSではどうやってるんだろう、という気持ちになります。

また、あえて著者作のツールを使わないことが理由でいろいろ詰まりましたが、むしろそれを解決していくことが勉強になったので、こういう進め方もおすすめです。
